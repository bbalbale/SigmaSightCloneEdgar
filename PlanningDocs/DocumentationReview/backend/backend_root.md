# Backend Root Files Documentation

This document describes all files in the `backend/` root directory.

---

## Configuration Files

### `pyproject.toml`
Defines Python project metadata, dependencies, and tool configurations for the FastAPI backend. Used by `uv` package manager for dependency installation and by build tools (hatchling) for packaging.

### `alembic.ini`
Alembic configuration for the Core database (users, portfolios, positions, market data). Used by `alembic -c alembic.ini` commands for schema migrations.

### `alembic_ai.ini`
Alembic configuration for the AI database (RAG documents, memories, feedback with pgvector). Used by `alembic -c alembic_ai.ini` commands for AI schema migrations.

### `docker-compose.yml`
Defines local PostgreSQL database container using pgvector image for vector similarity search. Used by `docker-compose up -d` for local development database.

### `railway.toml`
Railway deployment configuration for the main web service. Defines build settings and start command (`uvicorn app.main:app`). Used by Railway platform during deployment.

### `railway.json`
Railway cron job configuration for daily batch processing. Schedules `railway_daily_batch.py` to run at 11:30 PM UTC on weekdays. Used by Railway's cron scheduler.

### `.env`
Environment variables for local development (API keys, database URLs, secrets). Used by `app/config.py` via pydantic-settings to load configuration.

### `.env.example`
Template showing all available environment variables with documentation. Used as reference when setting up `.env` for new environments.

### `.gitignore`
Specifies files to exclude from git version control. Used by git to ignore Python caches, virtual environments, logs, and sensitive files.

### `.python-version`
Specifies Python version (3.11+) for tools like pyenv. Used by version managers to ensure correct Python version.

---

## Startup Scripts

### `run.py`
Development server entry point that starts uvicorn with hot reload on port 8000. Used by developers via `uv run python run.py` or `python run.py` for local development.

### `start.sh`
Production startup script that transforms DATABASE_URL format and starts uvicorn. Used by Railway (or similar platforms) as an alternative entry point for production deployment.

### `setup.sh`
Unix/Linux setup script that installs uv, syncs dependencies, creates .env, and runs verification. Used by new developers on Mac/Linux to bootstrap the development environment.

### `setup.bat`
Windows setup script with equivalent functionality to setup.sh. Used by new developers on Windows to bootstrap the development environment.

---

## Documentation Files

### `CLAUDE.md`
Comprehensive AI agent instructions with architecture reference, import patterns, and development guidelines (45KB). Used by AI coding assistants (Claude, Cursor, etc.) for context when working on the codebase.

### `README.md`
Project overview and setup instructions for the backend. Used as the primary documentation entry point for developers.

### `CLEANUP_PLAN.md`
Backend cleanup plan documenting archived files and planned cleanup phases. Used to track technical debt and archive inventory.

---

## Data Files

### `core_data.sql`
SQL dump of core database demo data. Used for database seeding and backup/restore operations.

### `railway_data.sql`
SQL dump exported from Railway production database. Used for local development with production data.

### `railway_data_with_columns.sql`
Verbose SQL dump from Railway with explicit column names. Used for data analysis and debugging schema issues.

### `Sample_Template.csv`
CSV template showing expected format for portfolio position imports. Used as reference for CSV import functionality.

### `factor_comparison_report.json`
JSON report comparing factor calculation results. Used for validation and debugging of factor calculations.

### `entry_price_corrections_plan.csv`
CSV documenting planned corrections to position entry prices. Used for data quality tracking and correction planning.

---

## Log Files

### `backend_server.log`
Server log output from development runs. Generated by uvicorn during local development.

### `batch_full_run.log`
Detailed log from batch processing runs (~192MB). Generated by batch_orchestrator during full batch execution.

---

## Audit Files

### `railway_audit_results.json`
JSON output from Railway data audit script. Generated by `scripts/railway/audit_railway_data.py`.

### `railway_audit_detailed_report.txt`
Detailed text report from Railway audit. Generated by Railway audit scripts.

---

## Temporary/Generated Files

### `nul`
Empty file (Windows artifact). Not used - can be deleted.

### `tmpclaude-*-cwd`
Temporary files created by Claude Code CLI. Not used - generated during AI assistance sessions.

---

## Directories (documented separately)

| Directory | Purpose |
|-----------|---------|
| `app/` | Main FastAPI application code |
| `scripts/` | Utility and operational scripts |
| `tests/` | Test suite |
| `migrations_core/` | Core database Alembic migrations |
| `migrations_ai/` | AI database Alembic migrations |
| `_docs/` | Project documentation |
| `_archive/` | Archived/deprecated files |
| `_guides/` | Quick reference guides |
| `analysis/` | Analysis and research files |
| `data/` | Runtime data files |
| `logs/` | Application log files |
| `reports/` | Generated portfolio reports |
| `test_portfolios/` | Test portfolio data |
