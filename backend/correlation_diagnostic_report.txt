================================================================================
NVDA/META Correlation Diagnostic Report
Generated: 2025-10-14 19:12:01.677639
================================================================================

Analysis Period: 2025-07-16 to 2025-10-14 (90 days)

================================================================================
STEP 1: Fetching raw price data from database
================================================================================
NVDA: 63 records
META: 63 records

âœ… Data loaded successfully

================================================================================
CHECK 1: Bad Price Data (inverted, splits, corrupted)
================================================================================

NVDA Price Data Quality:
----------------------------------------
  âœ… No zero prices
  âœ… No negative prices
  âœ… No duplicate dates
  ğŸ“Š Period return: +9.90% ($171.36 â†’ $188.32)
  âœ… No extreme daily moves detected
  ğŸ“ˆ Price range: $167.01 to $192.57
  ğŸ“Š Mean: $178.22, Std: $5.77

META Price Data Quality:
----------------------------------------
  âœ… No zero prices
  âœ… No negative prices
  âœ… No duplicate dates
  ğŸ“Š Period return: +1.89% ($702.44 â†’ $715.70)
  âœ… No extreme daily moves detected
  ğŸ“ˆ Price range: $694.74 to $789.47
  ğŸ“Š Mean: $743.92, Std: $25.83

================================================================================
CHECK 2: Date Overlap and Alignment
================================================================================
Date Overlap Analysis:
----------------------------------------
  NVDA trading days: 63
  META trading days: 63
  Common trading days: 63
  NVDA-only days: 0
  META-only days: 0
  Overlap: 100.0%
  âœ… Good date overlap

================================================================================
CHECK 3: Log Returns with Extreme Values
================================================================================

NVDA Log Returns Calculation:
----------------------------------------
  âœ… No infinite values
  ğŸ“Š Returns count: 62 (dropped 1 NaN)
  ğŸ“Š Mean return: 0.001522
  ğŸ“Š Std dev: 0.018380
  ğŸ“Š Min: -0.050100, Max: 0.038530

META Log Returns Calculation:
----------------------------------------
  âœ… No infinite values
  ğŸ“Š Returns count: 62 (dropped 1 NaN)
  ğŸ“Š Mean return: 0.000302
  ğŸ“Š Std dev: 0.020047
  ğŸ“Š Min: -0.039218, Max: 0.106634

================================================================================
CHECK 4: DataFrame Construction and Correlation Calculation
================================================================================
Correlation Calculation:
----------------------------------------
  DataFrame shape: (62, 2)
  Dates in DataFrame: 62
  NVDA non-null: 62
  META non-null: 62
  Both non-null: 62

  Correlation Matrix (min_periods=30):
            NVDA      META
NVDA  1.000000  0.252374
META  0.252374  1.000000

  ğŸ“Š NVDA-META Correlation: 0.252374
  ğŸ“Š Correlation (strict alignment, n=62): 0.252374

  Checking p-value calculation method:
  --------------------------------------
  Method A (WRONG - independent dropna):
    NVDA after dropna: 62 values
    META after dropna: 62 values
    Arrays are same length, but may not be date-aligned

  Method B (CORRECT - aligned dropna):
    Aligned observations: 62
    Correlation: 0.252374
    P-value: 0.047826
    Statistically significant: Yes

  EXPECTED vs ACTUAL:
  -------------------
  Both NVDA and META are mega-cap tech stocks.
  Expected correlation: 0.60 to 0.85 (positive, strong)
  Actual correlation: +0.252374
  âš ï¸  WARNING: Correlation is suspiciously low

================================================================================
DIAGNOSTIC COMPLETE
================================================================================
Full report saved to: C:\Users\BenBalbale\CascadeProjects\SigmaSight\backend\correlation_diagnostic_report.txt

